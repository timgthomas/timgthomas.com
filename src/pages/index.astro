---
import Layout from '../components/layout.astro'
// import StructuredData from "@/components/StructuredData.astro";
// import Comments from "@/components/Comments.astro";
import { formatDate } from '../lib/utils/datetime'
import { getPosts } from '../lib/models/post'

const posts = await getPosts()

const [firstpost, nextpost] = posts

const { Content } = await firstpost.render()

const hrefFor = (post) => `/${post.year}/${post.month}/${post.slug}`
---

<Layout title={firstpost.data.title}>
  <div role="main">
    <article>
      <header>
        <h1>{firstpost.data.title}</h1>
        <p>{formatDate(firstpost.date)}</p>
      </header>

      <Content />

      {/* Structured data (pass whatever props your component expects) */}
      <!-- <StructuredData post={firstpost} /> -->
    </article>

    <nav>
      <span class="post-nav-prev"></span>
      <span class="post-nav-next">
        {nextpost && <a href={hrefFor(nextpost)}>{nextpost.data.title}</a>}
      </span>
    </nav>

    {/* Comments (adapt to your system) */}
    <!-- <Comments page={firstpost} /> -->
  </div>
</Layout>
